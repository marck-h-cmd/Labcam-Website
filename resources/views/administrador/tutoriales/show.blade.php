@extends('administrador.dashboard.plantilla')

@section('contenido')
<div class="container mx-auto px-4 py-8">
    <!-- Tutorial Titulo -->
    <h1 class="text-3xl font-bold text-gray-800 mb-8 block max-md:text-2xl">{{ $tutorial->titulo }}</h1>
    
    <!-- Videos Section -->
    @if(count($filesByType['videos']) > 0)
    <section class="mb-12">
        <div class="bg-blue-500 text-white px-6 py-3 rounded-t-lg flex justify-between items-center cursor-pointer" onclick="toggleSection('videos-section')">
            <h2 class="text-xl font-semibold flex items-center">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 6.34315 14.6569 5 13 5H4C2.34315 5 1 6.34315 1 8V16C1 17.6569 2.34315 19 4 19H13C14.6569 19 16 17.6569 16 16V13.9432L21.4188 17.8137C21.7236 18.0315 22.1245 18.0606 22.4576 17.8892C22.7907 17.7178 23 17.3746 23 17V7C23 6.62541 22.7907 6.28224 22.4576 6.11083C22.1245 5.93943 21.7236 5.96854 21.4188 6.18627L16 10.0568V8ZM16.7205 12L21 8.94319V15.0568L16.7205 12ZM13 7C13.5523 7 14 7.44772 14 8V12V16C14 16.5523 13.5523 17 13 17H4C3.44772 17 3 16.5523 3 16V8C3 7.44772 3.44772 7 4 7H13Z"></path>
                </svg>
                Videos
            </h2>
            <svg id="videos-arrow" class="w-5 h-5 transform transition-transform duration-200" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </div>
        <div id="videos-section" class="bg-white p-6 rounded-b-lg shadow-md">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                @foreach($filesByType['videos'] as $video)
                <div class="border rounded-lg overflow-hidden">
                    <div class="p-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-2">{{ $video['name'] }}</h3>
                        <div class="aspect-w-16 aspect-h-9 bg-black rounded-lg overflow-hidden">
                            <video controls class="w-full h-full object-cover">
                                <source src="{{ $video['url'] }}" type="video/mp4">
                                Tu browser no soporta este tipo de video
                            </video>
                        </div>
                    </div>
                </div>
                @endforeach
            </div>
        </div>
    </section>
    @endif
    
    <!-- PDFs Section -->
    @if(count($filesByType['pdfs']) > 0)
    <section class="mb-12">
        <div class="bg-red-500 text-white px-6 py-3 rounded-t-lg flex justify-between items-center cursor-pointer" onclick="toggleSection('pdfs-section')">
            <h2 class="text-xl font-semibold flex items-center">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                    <path d="M75.9466667,285.653333 C63.8764997,278.292415 49.6246897,275.351565 35.6266667,277.333333 L1.42108547e-14,277.333333 L1.42108547e-14,405.333333 L28.3733333,405.333333 L28.3733333,356.48 L40.5333333,356.48 C53.1304778,357.774244 65.7885986,354.68506 76.3733333,347.733333 C85.3576891,340.027178 90.3112817,328.626053 89.8133333,316.8 C90.4784904,304.790173 85.3164923,293.195531 75.9466667,285.653333 L75.9466667,285.653333 Z M53.12,332.373333 C47.7608867,334.732281 41.8687051,335.616108 36.0533333,334.933333 L27.7333333,334.933333 L27.7333333,298.666667 L36.0533333,298.666667 C42.094796,298.02451 48.1897668,299.213772 53.5466667,302.08 C58.5355805,305.554646 61.3626692,311.370371 61.0133333,317.44 C61.6596233,323.558965 58.5400493,329.460862 53.12,332.373333 L53.12,332.373333 Z M150.826667,277.333333 L115.413333,277.333333 L115.413333,405.333333 L149.333333,405.333333 C166.620091,407.02483 184.027709,403.691457 199.466667,395.733333 C216.454713,383.072462 225.530463,362.408923 223.36,341.333333 C224.631644,323.277677 218.198313,305.527884 205.653333,292.48 C190.157107,280.265923 170.395302,274.806436 150.826667,277.333333 L150.826667,277.333333 Z M178.986667,376.32 C170.098963,381.315719 159.922142,383.54422 149.76,382.72 L144.213333,382.72 L144.213333,299.946667 L149.333333,299.946667 C167.253333,299.946667 174.293333,301.653333 181.333333,308.053333 C189.877212,316.948755 194.28973,329.025119 193.493333,341.333333 C194.590843,354.653818 189.18793,367.684372 178.986667,376.32 L178.986667,376.32 Z M254.506667,405.333333 L283.306667,405.333333 L283.306667,351.786667 L341.333333,351.786667 L341.333333,329.173333 L283.306667,329.173333 L283.306667,299.946667 L341.333333,299.946667 L341.333333,277.333333 L254.506667,277.333333 L254.506667,405.333333 L254.506667,405.333333 Z M234.666667,7.10542736e-15 L9.52127266e-13,7.10542736e-15 L9.52127266e-13,234.666667 L42.6666667,234.666667 L42.6666667,192 L42.6666667,169.6 L42.6666667,42.6666667 L216.96,42.6666667 L298.666667,124.373333 L298.666667,169.6 L298.666667,192 L298.666667,234.666667 L341.333333,234.666667 L341.333333,106.666667 L234.666667,7.10542736e-15 L234.666667,7.10542736e-15 Z"></path>
                </svg>
                DOCUMENTOS PDF
            </h2>
            <svg id="pdfs-arrow" class="w-5 h-5 transform transition-transform duration-200" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </div>
        <div id="pdfs-section" class="bg-white p-6 rounded-b-lg shadow-md">
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                @foreach($filesByType['pdfs'] as $pdf)
                <a href="{{ $pdf['url'] }}" target="_blank" class="group">
                    <div class="border rounded-lg p-4 h-full flex flex-col items-center justify-center hover:bg-gray-50 transition-colors">
                        <div class="w-16 h-16 mb-3 text-red-500">
                            <svg viewBox="0 0 512 512" fill="currentColor">
                                <path d="M75.9466667,285.653333 C63.8764997,278.292415 49.6246897,275.351565 35.6266667,277.333333 L1.42108547e-14,277.333333 L1.42108547e-14,405.333333 L28.3733333,405.333333 L28.3733333,356.48 L40.5333333,356.48 C53.1304778,357.774244 65.7885986,354.68506 76.3733333,347.733333 C85.3576891,340.027178 90.3112817,328.626053 89.8133333,316.8 C90.4784904,304.790173 85.3164923,293.195531 75.9466667,285.653333 L75.9466667,285.653333 Z M53.12,332.373333 C47.7608867,334.732281 41.8687051,335.616108 36.0533333,334.933333 L27.7333333,334.933333 L27.7333333,298.666667 L36.0533333,298.666667 C42.094796,298.02451 48.1897668,299.213772 53.5466667,302.08 C58.5355805,305.554646 61.3626692,311.370371 61.0133333,317.44 C61.6596233,323.558965 58.5400493,329.460862 53.12,332.373333 L53.12,332.373333 Z M150.826667,277.333333 L115.413333,277.333333 L115.413333,405.333333 L149.333333,405.333333 C166.620091,407.02483 184.027709,403.691457 199.466667,395.733333 C216.454713,383.072462 225.530463,362.408923 223.36,341.333333 C224.631644,323.277677 218.198313,305.527884 205.653333,292.48 C190.157107,280.265923 170.395302,274.806436 150.826667,277.333333 L150.826667,277.333333 Z M178.986667,376.32 C170.098963,381.315719 159.922142,383.54422 149.76,382.72 L144.213333,382.72 L144.213333,299.946667 L149.333333,299.946667 C167.253333,299.946667 174.293333,301.653333 181.333333,308.053333 C189.877212,316.948755 194.28973,329.025119 193.493333,341.333333 C194.590843,354.653818 189.18793,367.684372 178.986667,376.32 L178.986667,376.32 Z M254.506667,405.333333 L283.306667,405.333333 L283.306667,351.786667 L341.333333,351.786667 L341.333333,329.173333 L283.306667,329.173333 L283.306667,299.946667 L341.333333,299.946667 L341.333333,277.333333 L254.506667,277.333333 L254.506667,405.333333 L254.506667,405.333333 Z M234.666667,7.10542736e-15 L9.52127266e-13,7.10542736e-15 L9.52127266e-13,234.666667 L42.6666667,234.666667 L42.6666667,192 L42.6666667,169.6 L42.6666667,42.6666667 L216.96,42.6666667 L298.666667,124.373333 L298.666667,169.6 L298.666667,192 L298.666667,234.666667 L341.333333,234.666667 L341.333333,106.666667 L234.666667,7.10542736e-15 L234.666667,7.10542736e-15 Z"></path>
                            </svg>
                        </div>
                        <p class="text-sm font-medium text-gray-700 text-center group-hover:text-red-600 transition-colors truncate w-full">{{ $pdf['name'] }}</p>
                    </div>
                </a>
                @endforeach
            </div>
        </div>
    </section>
    @endif
    
    <!-- Archivos Section -->
    @if(count($filesByType['archives']) > 0)
    <section class="mb-12">
        <div class="bg-yellow-500 text-white px-6 py-3 rounded-t-lg flex justify-between items-center cursor-pointer" onclick="toggleSection('archives-section')">
            <h2 class="text-xl font-semibold flex items-center">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                    <path d="M378.412,0H208.298h-13.183l-9.314,9.314L57.02,138.102l-9.315,9.314v13.176v265.514 c0,47.36,38.528,85.895,85.896,85.895h244.811c47.354,0,85.882-38.535,85.882-85.895V85.895C464.294,38.528,425.766,0,378.412,0z M432.497,426.105c0,29.877-24.214,54.091-54.084,54.091H133.601c-29.884,0-54.098-24.214-54.098-54.091V160.591h83.717 c24.885,0,45.078-20.179,45.078-45.07V31.804h170.115c29.87,0,54.084,24.214,54.084,54.091V426.105z"></path>
                    <path d="M197.349,281.44c0-16.841-12.498-28.656-31.518-28.656h-29.339c-5.432,0-8.686,3.534-8.686,8.826v73.754 c0,6.388,4.203,10.599,10.04,10.599c5.851,0,9.915-4.21,9.915-10.599v-24.585c0-0.538,0.279-0.81,0.824-0.81h13.574l15.486,29.744 c2.318,4.344,5.711,6.25,9.789,6.25c5.976,0,9.496-4.35,9.496-9.51c0-1.899-0.405-3.805-1.354-5.572l-13.448-24.445 C191.638,301.681,197.349,292.716,197.349,281.44z M164.882,292.988h-16.296c-0.545,0-0.824-0.272-0.824-0.817v-21.324 c0-0.545,0.279-0.816,0.824-0.816h16.296c7.611,0,12.499,4.482,12.499,11.548C177.38,288.506,172.493,292.988,164.882,292.988z"></path>
                    <path d="M264.183,263.649c-2.583-7.331-6.786-11.681-13.853-11.681c-7.066,0-11.144,4.35-13.727,11.681l-24.983,69.138 c-0.405,1.082-0.684,2.444-0.684,3.798c0,5.705,4.622,9.378,9.65,9.378c4.343,0,7.876-2.584,9.37-7.066l3.658-11.27h33.012 l3.798,11.27c1.494,4.482,5.028,7.066,9.37,7.066c5.027,0,9.649-3.673,9.649-9.378c0-1.354-0.265-2.716-0.684-3.798 L264.183,263.649z M239.326,310.646l10.724-32.328h0.419l10.585,32.328H239.326z"></path>
                    <path d="M375.033,281.44c0-16.841-12.498-28.656-31.518-28.656h-29.34c-5.432,0-8.686,3.534-8.686,8.826v73.754 c0,6.388,4.203,10.599,10.04,10.599c5.851,0,9.915-4.21,9.915-10.599v-24.585c0-0.538,0.279-0.81,0.824-0.81h13.573l15.487,29.744 c2.318,4.344,5.712,6.25,9.789,6.25c5.977,0,9.496-4.35,9.496-9.51c0-1.899-0.405-3.805-1.355-5.572l-13.447-24.445 C369.322,301.681,375.033,292.716,375.033,281.44z M342.566,292.988h-16.297c-0.545,0-0.824-0.272-0.824-0.817v-21.324 c0-0.545,0.279-0.816,0.824-0.816h16.297c7.61,0,12.498,4.482,12.498,11.548C355.064,288.506,350.176,292.988,342.566,292.988z"></path>
                </svg>
                ARCHIVOS DESCARGABLES
            </h2>
            <svg id="archives-arrow" class="w-5 h-5 transform transition-transform duration-200" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </div>
        <div id="archives-section" class="bg-white p-6 rounded-b-lg shadow-md">
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                @foreach($filesByType['archives'] as $archive)
                <a href="{{ $archive['url'] }}" download class="group">
                    <div class="border rounded-lg p-4 h-full flex flex-col items-center justify-center hover:bg-gray-50 transition-colors">
                        <div class="w-16 h-16 mb-3 text-yellow-500">
                            @if($archive['extension'] === 'zip')
                            <svg viewBox="0 0 512 512" fill="currentColor">
                                <path d="M378.412,0H208.298h-13.183l-9.314,9.314L57.02,138.102l-9.315,9.314v13.176v265.514 c0,47.36,38.528,85.895,85.896,85.895h244.811c47.354,0,85.882-38.535,85.882-85.895V85.895C464.294,38.528,425.766,0,378.412,0z M432.497,426.105c0,29.877-24.214,54.091-54.084,54.091H133.601c-29.884,0-54.098-24.214-54.098-54.091V160.591h83.717 c24.885,0,45.078-20.179,45.078-45.07V31.804h170.115c29.87,0,54.084,24.214,54.084,54.091V426.105z"></path>
                                <path d="M197.349,281.44c0-16.841-12.498-28.656-31.518-28.656h-29.339c-5.432,0-8.686,3.534-8.686,8.826v73.754 c0,6.388,4.203,10.599,10.04,10.599c5.851,0,9.915-4.21,9.915-10.599v-24.585c0-0.538,0.279-0.81,0.824-0.81h13.574l15.486,29.744 c2.318,4.344,5.711,6.25,9.789,6.25c5.976,0,9.496-4.35,9.496-9.51c0-1.899-0.405-3.805-1.354-5.572l-13.448-24.445 C191.638,301.681,197.349,292.716,197.349,281.44z M164.882,292.988h-16.296c-0.545,0-0.824-0.272-0.824-0.817v-21.324 c0-0.545,0.279-0.816,0.824-0.816h16.296c7.611,0,12.499,4.482,12.499,11.548C177.38,288.506,172.493,292.988,164.882,292.988z"></path>
                                <path d="M264.183,263.649c-2.583-7.331-6.786-11.681-13.853-11.681c-7.066,0-11.144,4.35-13.727,11.681l-24.983,69.138 c-0.405,1.082-0.684,2.444-0.684,3.798c0,5.705,4.622,9.378,9.65,9.378c4.343,0,7.876-2.584,9.37-7.066l3.658-11.27h33.012 l3.798,11.27c1.494,4.482,5.028,7.066,9.37,7.066c5.027,0,9.649-3.673,9.649-9.378c0-1.354-0.265-2.716-0.684-3.798 L264.183,263.649z M239.326,310.646l10.724-32.328h0.419l10.585,32.328H239.326z"></path>
                                <path d="M375.033,281.44c0-16.841-12.498-28.656-31.518-28.656h-29.34c-5.432,0-8.686,3.534-8.686,8.826v73.754 c0,6.388,4.203,10.599,10.04,10.599c5.851,0,9.915-4.21,9.915-10.599v-24.585c0-0.538,0.279-0.81,0.824-0.81h13.573l15.487,29.744 c2.318,4.344,5.712,6.25,9.789,6.25c5.977,0,9.496-4.35,9.496-9.51c0-1.899-0.405-3.805-1.355-5.572l-13.447-24.445 C369.322,301.681,375.033,292.716,375.033,281.44z M342.566,292.988h-16.297c-0.545,0-0.824-0.272-0.824-0.817v-21.324 c0-0.545,0.279-0.816,0.824-0.816h16.297c7.61,0,12.498,4.482,12.498,11.548C355.064,288.506,350.176,292.988,342.566,292.988z"></path>
                            </svg>
                            @else
                            <svg viewBox="0 0 512 512" fill="currentColor">
                                <path d="M378.412,0H208.298h-13.183l-9.314,9.314L57.02,138.102l-9.315,9.314v13.176v265.514 c0,47.36,38.528,85.895,85.896,85.895h244.811c47.354,0,85.882-38.535,85.882-85.895V85.895C464.294,38.528,425.766,0,378.412,0z M432.497,426.105c0,29.877-24.214,54.091-54.084,54.091H133.601c-29.884,0-54.098-24.214-54.098-54.091V160.591h83.717 c24.885,0,45.078-20.179,45.078-45.07V31.804h170.115c29.87,0,54.084,24.214,54.084,54.091V426.105z"></path>
                                <path d="M197.349,281.44c0-16.841-12.498-28.656-31.518-28.656h-29.339c-5.432,0-8.686,3.534-8.686,8.826v73.754 c0,6.388,4.203,10.599,10.04,10.599c5.851,0,9.915-4.21,9.915-10.599v-24.585c0-0.538,0.279-0.81,0.824-0.81h13.574l15.486,29.744 c2.318,4.344,5.711,6.25,9.789,6.25c5.976,0,9.496-4.35,9.496-9.51c0-1.899-0.405-3.805-1.354-5.572l-13.448-24.445 C191.638,301.681,197.349,292.716,197.349,281.44z M164.882,292.988h-16.296c-0.545,0-0.824-0.272-0.824-0.817v-21.324 c0-0.545,0.279-0.816,0.824-0.816h16.296c7.611,0,12.499,4.482,12.499,11.548C177.38,288.506,172.493,292.988,164.882,292.988z"></path>
                                <path d="M264.183,263.649c-2.583-7.331-6.786-11.681-13.853-11.681c-7.066,0-11.144,4.35-13.727,11.681l-24.983,69.138 c-0.405,1.082-0.684,2.444-0.684,3.798c0,5.705,4.622,9.378,9.65,9.378c4.343,0,7.876-2.584,9.37-7.066l3.658-11.27h33.012 l3.798,11.27c1.494,4.482,5.028,7.066,9.37,7.066c5.027,0,9.649-3.673,9.649-9.378c0-1.354-0.265-2.716-0.684-3.798 L264.183,263.649z M239.326,310.646l10.724-32.328h0.419l10.585,32.328H239.326z"></path>
                                <path d="M375.033,281.44c0-16.841-12.498-28.656-31.518-28.656h-29.34c-5.432,0-8.686,3.534-8.686,8.826v73.754 c0,6.388,4.203,10.599,10.04,10.599c5.851,0,9.915-4.21,9.915-10.599v-24.585c0-0.538,0.279-0.81,0.824-0.81h13.573l15.487,29.744 c2.318,4.344,5.712,6.25,9.789,6.25c5.977,0,9.496-4.35,9.496-9.51c0-1.899-0.405-3.805-1.355-5.572l-13.447-24.445 C369.322,301.681,375.033,292.716,375.033,281.44z M342.566,292.988h-16.297c-0.545,0-0.824-0.272-0.824-0.817v-21.324 c0-0.545,0.279-0.816,0.824-0.816h16.297c7.61,0,12.498,4.482,12.498,11.548C355.064,288.506,350.176,292.988,342.566,292.988z"></path>
                            </svg>
                            @endif
                        </div>
                        <p class="text-sm font-medium text-gray-700 text-center group-hover:text-yellow-600 transition-colors truncate w-full">{{ $archive['name'] }}</p>
                    </div>
                </a>
                @endforeach
            </div>
        </div>
    </section>
    @endif
</div>

<script>
    // Funcion para desplegable de las secciones
    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        const arrow = document.getElementById(sectionId.replace('-section', '-arrow'));
        
        if (section.classList.contains('hidden')) {
            section.classList.remove('hidden');
            arrow.classList.remove('rotate-180');
        } else {
            section.classList.add('hidden');
            arrow.classList.add('rotate-180');
        }
    }
</script>
@endsection